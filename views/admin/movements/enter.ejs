<%- include('../../partils/header') %>
<%- include('../../partils/navbar') %>
<div class="container-fluid">
    <div class="card mt-3">
        <div class="card-header">
            <h2 class="my-1 fs-6">Cadastrar entrada</h2>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-6 col-md-3 mb-3">
                    <form action="/admin/movements/save" method="POST"
                        onsubmit="verificarCampos(event, this)">
                        <label for="tipo" class="form-label">Tipo:</label>
                        <input type="text" class="form-control form-control-sm"
                            id="tipo" name="tipo" value="Entrada" disabled>
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="expedidor" class="form-label">Expedidor:</label>
                    <input type="text" class="form-control form-control-sm"
                        id="expedidor" name="expedidor" placeholder="">
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="destinatario"
                        class="form-label">Destinatário:</label>
                    <input type="text" class="form-control form-control-sm"
                        id="destinatario" name="destinatario" value="REDA XXI"
                        disabled>
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="" class="form-label">Número:</label>
                    <input type="text" class="form-control form-control-sm"
                        id="" name="" placeholder="" value="0001">
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="matricula" class="form-label">Matrícula:</label>
                    <input type="text" class="form-control form-control-sm"
                        id="matricula" name="matricula" placeholder="">
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="data" class="form-label">Data:</label>
                    <input type="date" class="form-control form-control-sm"
                        id="data" name="data" placeholder="">
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="horarioEntrada" class="form-label">Horário de
                        entrada:</label>
                    <input type="time" class="form-control form-control-sm"
                        id="horarioEntrada" name="" placeholder="">
                </div>
                <div class="col-6 col-md-3 mb-3">
                    <label for="horarioSaida" class="form-label">Horário de
                        saída:</label>
                    <input type="time" class="form-control form-control-sm"
                        id="horarioSaida" name="" placeholder="">
                </div>
                <hr>
                <div class="col-12  mb-3">
                    <h2 class="m-0 fs-6">Consumíveis</h2>
                </div>
                <div class="col-12 col-md-3 mb-3">
                    <label for="quantidadeConsumiveis"
                        class="form-label">Quantidade total:</label>
                    <input type="number" class="form-control form-control-sm"
                        id="quantidadeConsumiveis" name="" value="1" min="1"
                        onchange="ajustarTabela()">
                </div>
                <div class="table-responsive" id="tabelaRacks">
                    <table
                        class="table table-sm table-bordered mb-2 mb-md-1">
                        <thead>
                            <tr>
                                <th class="text-nowrap px-2 py-1 text-nowrap">Quantidade individual</th>
                                <th class="text-nowrap px-2 py-1 text-nowrap">Descrição</th>
                            </tr>
                        </thead>
                        <tbody id="myTable">
                            <tr>
                                <td class="text-nowrap px-2 py-1 text-nowrap">
                                    <input type="number"
                                        class="form-control form-control-sm"
                                        id="quantidadeConsumiveisIndividual"
                                        name="" value="1" min="1">
                                </td>
                                <td class="text-nowrap px-2 py-1 text-nowrap">
                                    <select name="" id=""
                                        class="form-select form-select-sm">
                                        <% prices.forEach(price => { %>
                                            <option value="<%= price.valor %>"><%= price.cliente %> - <%= price.descricao %></option>
                                        <% }); %>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <hr>
        </div>
        <div class="card-footer text-muted">
            <button type="submit"
                class="btn btn-success btn-sm">Cadastrar</button>
            </form>
        </div>
    </div>

</div>
</div>
<script>
    function ajustarTabela() {
        var quantidade = document.getElementById("quantidadeConsumiveis").value;
        var tabela = document.getElementById("myTable");

        // Limpa a tabela removendo todas as linhas
        tabela.innerHTML = ""; // Remove todo o conteúdo dentro da tabela

        // Adiciona as novas linhas à tabela com base no valor de quantidade
        for (var i = 0; i < quantidade; i++) {
            var row = tabela.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);

            cell1.innerHTML =
                '<input type="number" class="form-control form-control-sm" id="quantidadeConsumiveisIndividual" name="" value="1" min="1">';
            cell2.innerHTML =
                '<select name="" id="" class="form-select form-select-sm"><% prices.forEach(price => { %><option value="<%= price.valor %>"><%= price.cliente %> - <%= price.descricao %></option><% }); %></select>';
        }
    }
</script>
<%- include('../../partils/footer') %>